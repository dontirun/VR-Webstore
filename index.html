<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Hello, World! - A-Frame</title>
  <meta name="description" content="Hello, World! - A-Frame">
  <script src="https://aframe.io/releases/0.3.2/aframe.min.js"></script>
  <script src="https://rawgit.com/bryik/aframe-vive-cursor-component/master/dist/aframe-vive-cursor-component.min.js"></script>
  <script src="https://rawgit.com/bryik/aframe-bmfont-text-component/master/dist/aframe-bmfont-text-component.min.js"></script>
  <script src="https://rawgit.com/IdeaSpaceVR/aframe-ui-modal-component/master/dist/aframe-ui-modal-component.min.js"></script>
</head>


<body>
  <a-assets>
    <img id="woodfloor" src="/assets/textures/woodfloor.jpg"> //bookshelf stuff
    <a-asset-item id="bookshelf-obj" src="/assets/models/Shelves/RetroRoomDivider.obj"></a-asset-item>
    <a-asset-item id="bookshelf-mtl" src="/assets/models/Shelves/RetroRoomDivider.mtl"></a-asset-item>
    //table stuff
    <a-asset-item id="table-obj" src="/assets/models/mesa.obj"></a-asset-item>
    <a-asset-item id="table-mtl" src="/assets/models/mesa.mtl"></a-asset-item>
    //cash register
    <a-asset-item id="register-obj" src="/assets\models\Register\SPA-check.obj"></a-asset-item>
    <a-asset-item id="register-mtl" src="/assets\models\Register\SPA-check.mtl"></a-asset-item>
  </a-assets>

  <a-scene id="scene">
    <a-entity bmfont-text="text:By Arthur Dooner, Arun Donti, Robyn Domanico, Stephen Lafortune;width:350;color:#000000;letterSpacing:0"
      position="-8.26 1.02 7.43" rotation="0 90 0" scale="10 10 1" id="authorship"></a-entity>
    <a-entity hand-controls="left" id="lhand" scale="1 1 1"></a-entity>
    <a-entity hand-controls="right" id="rhand" scale="1 1 1" vive-cursor></a-entity>

    <a-sky color="#C0DFF5" material="color:#bdddf4;shader:flat" scale="-1 1 1" position="0 0 0" geometry="primitive:sphere;radius:5000;segmentsWidth:64;segmentsHeight:20"></a-sky>

    <!-- Cursor for testing -->
    <!-- <a-entity position="0 1.6 0" camera="active:true;userHeight:1.6;near:0.01" wasd-controls="" rotation="-11.23 -3.21 0" look-controls="" aframe-injected="" data-aframe-inspector="default-camera" id="camera">
        <a-entity cursor="fuse: false"
            position="0 0 -1"
            geometry="primitive: ring"
            material="color: black; shader: flat">
        </a-entity>
      </a-entity> -->

    <a-entity position="3.0 2 -1.5" id="menu" rotation="0 -45 0" visible="true">
      <a-plane width="3" height="0.5" color="gray" id="item1" position="0 1 0">
        <a-entity bmfont-text="text: Item1; align: left;" position="-1.5 0 0"></a-entity>
      </a-plane>
      <a-plane width="3" height="0.5" color="gray" id="item2" position="0 0.4 0">
        <a-entity bmfont-text="text: Item2; align: left;" position="-1.5 0 0"></a-entity>
      </a-plane>
      <a-plane width="3" height="0.5" color="gray" id="item3" position="0 -0.2 0">
        <a-entity bmfont-text="text: Item3; align: left;" position="-1.5 0 0"></a-entity>
      </a-plane>
    </a-entity>

    // walls
    <a-entity position="-8.57 5.1 0" id="left wall" rotation="0 0 0" scale="0.5 10 20" color="#ADD8E6" geometry="primitive:box"
      material="color:#ADD8E6"></a-entity>
    <a-entity position="7.46 5.1 0" id="right wall" rotation="0 0 0" scale="0.5 10 20" color="#ADD8E6" geometry="primitive:box"
      material="color:#ADD8E6" visible="true"></a-entity>
    <a-entity position="-0.64 5.1 9.42" id="back wall" scale="16 10 1" color="#ADD8E6" geometry="primitive:box" material="color:#ADD8E6"></a-entity>
    <a-entity position="-0.69 5.1 -9.52" id="front wall" scale="16 10 1" color="#ADD8E6" geometry="primitive:box" material="color:#ADD8E6"
      rotation="0 0 0" visible="true"></a-entity>


    <a-entity position="0 -0.1 0" scale="1 0 1" id="floor" geometry="primitive:box;radius:45;width:45;height:1;depth:45" material="src:#woodfloor"></a-entity>
    <a-entity position="-1.31 1.28 -1.50" id="register" obj-model="obj:#register-obj;mtl:#register-mtl" scale="0.5 0.5 0.5" color="#804040"
      material="" rotation="0 270 0"></a-entity>
    <a-entity position="0 2.8 -5.17" id="table" obj-model="obj:#table-obj;mtl:#table-mtl" scale="0.05 0.05 0.05" color="#804040"
      material=""></a-entity>
    <a-entity position="0 1 -0.9" id="table2" obj-model="obj:#table-obj;mtl:#table-mtl" scale="0.01 0.02 0.01" color="#804040"
      material=""></a-entity>
    <a-entity position="6.28 0.1 -0.46" id="shelf1" obj-model="obj:#bookshelf-obj;mtl:#bookshelf-mtl" scale="0.05 0.02 0.02"
      color="#804040" material="" rotation="0 90 0"></a-entity>
    <a-plane position="-0.09 2.24 -2.67" rotation="-20 0 0" width="1.7" height="2" color="#242B93" material="color:#242B93;opacity:0.5"
      geometry="primitive:box;width:1.7;height:4;depth:0.05" id="panel" scale="2 1 1"></a-plane>
</body>
<script>
    //var aframe = require('aframe');
    //var text =require('aframe-bmfont-text-component');

    var aScene = document.querySelector("a-scene");
    var assetList = document.querySelector("a-assets");

    var galleryOBJ = document.createElement("a-asset-item");
    galleryOBJ.setAttribute("id", "gallery-obj");
    galleryOBJ.setAttribute("src", "assets/models/IronMan.obj");
    assetList.appendChild(galleryOBJ);

    var galleryMTL = document.createElement("a-asset-item");
    galleryMTL.setAttribute("id", "gallery-mtl");
    galleryMTL.setAttribute("src", "assets/models/IronMan.mtl");
    assetList.appendChild(galleryMTL);

    //var COLORS = ['red', 'green', 'blue'];
    var tempPlane2 =false;
    document.querySelector('#panel').addEventListener('click', function () {
      if(tempPlane2 == false){

          var galleryMesh = document.createElement("a-entity");
          galleryMesh.setAttribute("id", "testPlane");
          galleryMesh.setAttribute("obj-model", "obj: #gallery-obj; mtl: #gallery-mtl");
          galleryMesh.setAttribute("position", "0.59 1.26 -1.66");
          galleryMesh.setAttribute("scale", ".005 .005 .005");
          aScene.appendChild(galleryMesh);
          tempPlane2 = true;
      }
      else{
        var testPlane = document.getElementById("testPlane");
        aScene.removeChild(testPlane);
        tempPlane2 = false;
      }
      //var randomIndex = Math.floor(Math.random() * COLORS.length);
      //var ul = document.querySelector('temp')
      //ul.innerHTML = '<a-plane position="3 2.27 -4.5" rotation="-20 0 0" width="4" height="4" color="#242B93" material="color:#242B93;opacity:1" geometry="primitive:box;width:4;height:4;depth:0.05" id="panel2"></a-plane>'
    });

    var leftHand = document.getElementById("lhand");
    var rightHand = document.getElementById("rhand");
    var menu = document.getElementById("menu");
    var menutoggle = 0;

    rightHand.addEventListener("menudown", function () {
      if (menutoggle == 0) {
        menutoggle = 1;
        menu.setAttribute("visible", "true");
      }
      else if (menutoggle == 1) {
        menutoggle = 0;
        menu.setAttribute("visible", "false");
      }
    });

    document.querySelector('#menu').addEventListener("click", function (event) {
      alert(event.target.id);
    })

  </script>

</html>