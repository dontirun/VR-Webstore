<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello, World! - A-Frame</title>
    <meta name="description" content="Hello, World! - A-Frame">
    <script src="https://aframe.io/releases/0.3.2/aframe.min.js"></script>
  </head>


  <body>
    <a-assets>
      <img id="woodfloor" src="/assets/textures/woodfloor.jpg">
      //bookshelf stuff
      <a-asset-item id="bookshelf-obj" src="/assets/models/Shelves/RetroRoomDivider.obj"></a-asset-item>
      <a-asset-item id="bookshelf-mtl" src="/assets/models/Shelves/RetroRoomDivider.mtl"></a-asset-item>
      //table stuff
      <a-asset-item id="table-obj" src="/assets/models/mesa.obj"></a-asset-item>
      <a-asset-item id="table-mtl" src="/assets/models/mesa.mtl"></a-asset-item>

    </a-assets>

    <a-scene id = "scene">
      <a-entity vive-controls="hand: left"></a-entity>
      <a-entity vive-controls="hand: right"></a-entity>
      <div id ="temp">
      </div>
      <a-sky color="#C0DFF5" material="color:#bdddf4;shader:flat" scale="-1 1 1" position="0 0 0" geometry="primitive:sphere;radius:5000;segmentsWidth:64;segmentsHeight:20"></a-sky>
      <a-entity position="0 1.6 0" camera="active:true;userHeight:1.6;near:0.01" wasd-controls="" rotation="-11.23 -3.21 0" look-controls="" aframe-injected="" data-aframe-inspector="default-camera" id="camera">
        <a-entity cursor="fuse: false"
            position="0 0 -1"
            geometry="primitive: ring"
            material="color: black; shader: flat">
        </a-entity>
      </a-entity>
      //  walls
      <a-entity position="-8.57 5.1 0" id="left wall" rotation="1 0 0" scale="0.5 10 20" color="#ADD8E6" geometry="primitive:box" material="color:#ADD8E6"></a-entity>
      <a-entity position="7.46 5.1 0" id="right wall" rotation="1 0 0" scale="0.5 10 20" color="#ADD8E6" geometry="primitive:box" material="color:#ADD8E6"visible="true"></a-entity>
      <a-entity position="-0.64 5.1 9.42" id="back wall" scale="16 10 1" color="#ADD8E6" geometry="primitive:box" material="color:#ADD8E6"></a-entity>
      <a-entity position="-0.69 5.1 -9.52" id="front wall" scale="16 10 1" color="#ADD8E6" geometry="primitive:box" material="color:#ADD8E6" rotation="0 0 0" visible="true"></a-entity>
      

      <a-entity position="0 0 0" scale="1 0 1" id="floor" geometry="primitive:box;radius:45;width:45;height:1;depth:45" material="src:#woodfloor"></a-entity>
      <a-entity position="0 2.8 -5.17" id="table" obj-model="obj:#table-obj;mtl:#table-mtl" scale="0.05 0.05 0.05" color="#804040" material=""></a-entity>
      <a-entity position="5.43 0.1 -0.46" id="shelf1" obj-model="obj:#bookshelf-obj;mtl:#bookshelf-mtl" scale="0.05 0.02 0.02" color="#804040" material="" rotation="0 90 0"></a-entity>      
      <a-plane position="0 4.57 -7.99" rotation="-20 0 0" width="4" height="4" color="#242B93" material="color:#242B93;opacity:0.5" geometry="primitive:box;width:4;height:4;depth:0.05" id="panel"></a-plane>    </a-scene>
  </body>

  <script>
    var aScene = document.querySelector("a-scene");
    var assetList = document.querySelector("a-assets");

    var galleryOBJ = document.createElement("a-asset-item");
    galleryOBJ.setAttribute("id", "gallery-obj");
    galleryOBJ.setAttribute("src", "assets/models/IronMan.obj");
    assetList.appendChild(galleryOBJ);

    var galleryMTL = document.createElement("a-asset-item");
    galleryMTL.setAttribute("id", "gallery-mtl");
    galleryMTL.setAttribute("src", "assets/models/IronMan.mtl");
    assetList.appendChild(galleryMTL);

    //var COLORS = ['red', 'green', 'blue'];
    var tempPlane2 =false;
    document.querySelector('#panel').addEventListener('click', function () {
      if(tempPlane2 == false){

          var galleryMesh = document.createElement("a-entity");
          galleryMesh.setAttribute("id", "testPlane");
          galleryMesh.setAttribute("obj-model", "obj: #gallery-obj; mtl: #gallery-mtl");
          galleryMesh.setAttribute("position", "3.03 2.90 -7.39");
          galleryMesh.setAttribute("scale", ".005 .005 .005");
          aScene.appendChild(galleryMesh);
          tempPlane2 = true;
      }
      else{
        var testPlane = document.getElementById("testPlane");
        aScene.removeChild(testPlane);
        tempPlane2 = false;
      }
      //var randomIndex = Math.floor(Math.random() * COLORS.length);
      //var ul = document.querySelector('temp')
      //ul.innerHTML = '<a-plane position="3 2.27 -4.5" rotation="-20 0 0" width="4" height="4" color="#242B93" material="color:#242B93;opacity:1" geometry="primitive:box;width:4;height:4;depth:0.05" id="panel2"></a-plane>'
    });


  </script>
</html>
